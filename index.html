<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PMG‚Ñ¢EDU | All Courses</title>
<style>
body{margin:0;font-family:Arial,sans-serif;background:#0f0f0f;color:#f0f0f0;text-align:center;padding:20px;}
h1{color:#FFD700;font-size:2.5em;}
.quote{font-size:1.6em;font-weight:bold;margin:20px auto 30px;background: linear-gradient(to right,#222,#888);-webkit-background-clip:text;-webkit-text-fill-color:transparent;max-width:900px;}
.courses{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:15px;max-width:800px;margin:auto;}
.course{background:#1b1b1b;padding:20px;border-radius:12px;cursor:pointer;}
.course h3{color:#FFD700;}
.section{margin-top:30px;background:#1b1b1b;padding:20px;border-radius:12px;max-width:800px;margin:auto;position:relative;}
.paper-btn{width:100%;padding:12px;margin:6px 0;border:none;border-radius:10px;font-weight:bold;cursor:pointer;background:linear-gradient(135deg,#FFD700,#cfa100);color:#111;}
.locked{background:#555;color:#ccc;}
iframe{border:none;background:#111;}
#watermark{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) rotate(-45deg);font-size:5em;color:rgba(255,255,255,0.1);font-weight:bold;pointer-events:none;z-index:10;user-select:none;white-space:nowrap;}
.pay-box input{padding:10px;border-radius:8px;border:none;width:60%;margin-bottom:10px;}
.pay-box button{padding:12px 20px;border:none;border-radius:10px;background:#FFD700;color:#111;font-weight:bold;cursor:pointer;}
#admin-unlock{display:none;position:fixed;bottom:20px;right:20px;background:#ff0;color:#111;padding:10px 15px;border-radius:8px;font-weight:bold;cursor:pointer;z-index:1000;}
</style>
</head>
<body>

<h1>PMG‚Ñ¢EDU</h1>
<div class="quote">WORK HARDER. NOBODY CARES.</div>

<p>All Courses ‚Ä¢ Monthly Subscription: <b>K25</b></p>

<div class="courses">
  <div class="course" onclick="loadCourse('MA110')"><h3>MA110</h3></div>
  <div class="course" onclick="loadCourse('BI110')"><h3>BI110</h3></div>
  <div class="course" onclick="loadCourse('CH110')"><h3>CH110</h3></div>
  <div class="course" onclick="loadCourse('CS110')"><h3>CS110</h3></div>
  <div class="course" onclick="loadCourse('PH110')"><h3>PH110</h3></div>
</div>

<div id="papers" class="section">
  <p>Select a course to view papers.</p>
</div>

<div id="viewer" class="section" style="display:none;">
  <h2 id="viewer-title"></h2>
  <iframe id="pdfFrame" width="100%" height="600px"></iframe>
  <div id="watermark">PMG‚Ñ¢ EDU</div>
</div>

<div class="pay-box">
  <h2>Activate Subscription</h2>
  <input type="text" id="username" placeholder="Enter your Name or Phone">
  <br>
  <button onclick="notifyPayment()">I Paid</button>
  <p>üì± Send payment K25 and screenshot to WhatsApp: <b>0775302886</b></p>
</div>

<!-- Admin unlock button (only visible to you) -->
<button id="admin-unlock" onclick="unlockAccess()">üîì Admin Unlock</button>

<script>
document.addEventListener("contextmenu", e => e.preventDefault());

const years=[2018,2019,2020,2021,2022,2023,2024];
const demoYears=[2018,2019,2020,2021,2022];
const subscriptionDays=30;
let userAccess=false;

// Load papers for selected course
function loadCourse(course){
  let html=`<h2>${course} Past Papers</h2>`;
  years.forEach(y=>{
    if(demoYears.includes(y) || userAccess){
      html+=`<button class="paper-btn" onclick="openPaper('${course}',${y})">${course} ‚Äì ${y}</button>`;
    }else{
      html+=`<button class="paper-btn locked" onclick="locked()">${course} ‚Äì ${y} üîí</button>`;
    }
  });
  document.getElementById("papers").innerHTML=html;
}

// Notify payment
function notifyPayment(){
  const user=document.getElementById('username').value.trim();
  if(!user){
    alert("‚ö†Ô∏è Please enter your Name or Phone before sending payment.");
    return;
  }
  localStorage.setItem('lastPayer', user);
  alert(`‚úÖ Payment notification recorded for ${user}!\nSend screenshot to WhatsApp 0775302886.\nThen click Admin Unlock.`);
}

// Admin unlock (manual)
function unlockAccess(){
  const now=new Date().getTime();
  localStorage.setItem('subscriptionStart', now);
  userAccess=true;
  const payer = localStorage.getItem('lastPayer') || 'Unknown';
  alert(`‚úÖ Access granted to ${payer} for 30 days!`);
  loadCourse('MA110');
}

// Check subscription expiry
function checkSubscriptionExpiry(){
  const start = localStorage.getItem('subscriptionStart');
  if(!start) return;
  const now = new Date().getTime();
  const diffDays=(now-parseInt(start))/(1000*60*60*24);
  if(diffDays>subscriptionDays){
    userAccess=false;
    alert("‚ö†Ô∏è Subscription expired. Renew to continue viewing papers.");
    loadCourse('MA110');
  }else{
    userAccess=true;
  }
}
setInterval(checkSubscriptionExpiry, 60*1000);

// Open PDF in iframe
function openPaper(course,year){
  const filePath=`past-papers/${course}/${course}-${year}.pdf`;
  if(!demoYears.includes(year) && !userAccess){
    alert("üîí Locked. Activate your subscription via WhatsApp first.");
    return;
  }
  document.getElementById("viewer-title").innerText=`${course} ‚Äì ${year} Past Paper`;
  document.getElementById("pdfFrame").src=filePath+"#toolbar=0&navpanes=0&scrollbar=0";
  document.getElementById("viewer").style.display="block";
  document.getElementById("viewer").scrollIntoView({behavior:"smooth"});
}

// Prevent download
document.addEventListener('keydown', function(e){
  if(e.key==="s" && (e.ctrlKey || e.metaKey)) e.preventDefault();
});

// Show admin button only for you (example: set localStorage manually)
if(localStorage.getItem('isAdmin')==='true'){
  document.getElementById('admin-unlock').style.display='block';
}

// Initialize
checkSubscriptionExpiry();
</script>

</body>
</html>
